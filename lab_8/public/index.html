<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Test AJAX page</title>
    <link rel="stylesheet" type="text/css" href="./lab_styles.css" />
  </head>

  <body>
    <div class="container">
      <div class="wrapper">
        <div class="header">API Loader</div>
        <button class="button" onclick="loadData()">
          Load Some JSON from a server
        </button>
        <div class="content"></div>
        <div class="footer"></div>
      </div>
    </div>
    <script>
      function loadData() {
        console.log("fetch"); // confirm code is running on click
        fetch("/api")
          .then(res => res.json())
          .then(res => {
            // logging step to check what we got
            return res;
          })
          .then(res => {
            makeListInHTML(res.data);
            function makeListInHTML(array) {
              const htmlTarget = document.querySelector(".content");
              htmlTarget.innerHTML = "";
              let el1 = document.createElement("ol");
              el1.className = "list";
              htmlTarget.appendChild(el1);
              for (let i = 0; i < array.length; i++) {
                let el = document.createElement("li");
                el.innerText = array[i];
                el1.appendChild(el);
              }
            }
            // const htmlTarget = document.querySelector(".content");
            // htmlTarget.innerHTML = "";
            // let el1 = document.createElement("ol");
            // el1.className = "list";
            // htmlTarget.appendChild(el1);
            // for (let i = 0; i < res.data.length; i++) {
            //   let el = document.createElement("li");
            //   el.innerText = res.data[i];
            //   htmlTarget.appendChild(el);
            console.log(res);
            return res;
          });
      }
    </script>
  </body>
</html>
